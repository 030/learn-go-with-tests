<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lets play poker</title>
</head>
<body>

    <div id="game-start">
        <label for="player-count">Number of players</label>
        <input type="number" id="player-count"/>
        <button id="start-game">Start</button>
    </div>

    <form method="post" id="declare-winner">
        <label for="winner">Winner</label>
        <input type="text" id="winner" />
        <input type="submit" id="winner-button" />
    </form>

    <div id="blind-value" />

</body>
<script type="application/javascript">
    const startGame = document.getElementById("game-start")
    const declareWinner = document.getElementById("declare-winner")
    const blindContainer = document.getElementById("blind-value")

    declareWinner.hidden = true

    document.getElementById("start-game").addEventListener('click', event => {
        startGame.hidden = true
        declareWinner.hidden = false

        const numberOfPlayers = document.getElementById('player-count').value

        if (window["WebSocket"]) {
            const conn = new WebSocket("ws://" + document.location.host + "/ws");

            conn.onclose = evt => {
                blindContainer.innerText = "Connection closed"
            };

            conn.onmessage = evt => {
                blindContainer.innerText = evt.data
            };

            conn.onopen = function () {
                conn.send(numberOfPlayers);
            }
        }
    })
</script>
</html>
